{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\admin\\\\Desktop\\\\Ministry of Programming\\\\askit\\\\src\\\\components\\\\likes\\\\Likes.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { FaRegHeart, FaHeart } from 'react-icons/fa'; //import \"../questions/Question.css\";\n\nimport { createLike, deleteLike, fetchLikes } from '../../store/modules/likes/actions/likesaction';\nimport { history } from '../../history';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Likes = ({\n  questionsID\n}) => {\n  _s();\n\n  const dispatch = useDispatch();\n  const currentState = useSelector(state => state);\n  console.log(questionsID);\n  const questionsLikes = currentState.LikesState;\n  const currentUserState = useSelector(state => state.Auth);\n  const authID = currentUserState ? currentUserState.userId : \"\";\n  let questionsLike = 0;\n  let likeID = null;\n  let authLiked = false;\n\n  if (questionsLikes) {\n    // eslint-disable-next-line array-callback-return\n    questionsLikes.likeItems.map(eachItem => {\n      if (eachItem.questionsID === questionsID) {\n        questionsLike = eachItem.likes.length; // eslint-disable-next-line array-callback-return\n\n        eachItem.likes.map(eachLike => {\n          if (eachLike.user_id === authID) {\n            authLiked = true;\n            likeID = eachLike.id;\n          }\n        });\n      }\n    });\n  }\n\n  const getQuestionsLikes = id => dispatch(fetchLikes(id));\n\n  const addLike = id => dispatch(createLike(id));\n\n  const removeLike = details => dispatch(deleteLike(details));\n\n  useEffect(() => {\n    getQuestionsLikes(questionsID); // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  const unLike = e => {\n    e.preventDefault();\n    let id = likeID;\n    removeLike({\n      id,\n      questionsID\n    });\n  };\n\n  const saveLike = e => {\n    e.preventDefault();\n    addLike(questionsID);\n  };\n\n  const likeToggle = e => {\n    e.preventDefault();\n    authLiked ? unLike(e) : saveLike(e);\n  };\n\n  const noAuth = e => {\n    e.preventDefault();\n    history.push('/login');\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"style-fav\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"style-heart-outer\",\n      children: /*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"mr-4\",\n        children: authID ? /*#__PURE__*/_jsxDEV(\"span\", {\n          onClick: likeToggle,\n          children: [authLiked ? /*#__PURE__*/_jsxDEV(FaHeart, {\n            className: \"style-auth\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 79,\n            columnNumber: 15\n          }, this) : /*#__PURE__*/_jsxDEV(FaRegHeart, {\n            className: \"style-heart\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 81,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"ml-2\",\n            children: questionsLike\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 83,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 77,\n          columnNumber: 13\n        }, this) : /*#__PURE__*/_jsxDEV(\"span\", {\n          onClick: noAuth,\n          children: [/*#__PURE__*/_jsxDEV(FaRegHeart, {\n            className: \"style-heart\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 89,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"ml-2\",\n            children: questionsLike\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 90,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 73,\n    columnNumber: 5\n  }, this);\n};\n\n_s(Likes, \"vqxln2hP6mIa5mX887T77ciQufk=\", false, function () {\n  return [useDispatch, useSelector, useSelector];\n});\n\n_c = Likes;\nexport default Likes;\n\nvar _c;\n\n$RefreshReg$(_c, \"Likes\");","map":{"version":3,"sources":["C:/Users/admin/Desktop/Ministry of Programming/askit/src/components/likes/Likes.js"],"names":["React","useEffect","useSelector","useDispatch","FaRegHeart","FaHeart","createLike","deleteLike","fetchLikes","history","Likes","questionsID","dispatch","currentState","state","console","log","questionsLikes","LikesState","currentUserState","Auth","authID","userId","questionsLike","likeID","authLiked","likeItems","map","eachItem","likes","length","eachLike","user_id","id","getQuestionsLikes","addLike","removeLike","details","unLike","e","preventDefault","saveLike","likeToggle","noAuth","push"],"mappings":";;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,SAASC,WAAT,EAAsBC,WAAtB,QAAyC,aAAzC;AACA,SAASC,UAAT,EAAqBC,OAArB,QAAoC,gBAApC,C,CAEA;;AACA,SAASC,UAAT,EAAqBC,UAArB,EAAiCC,UAAjC,QAAmD,+CAAnD;AACA,SAASC,OAAT,QAAwB,eAAxB;;;AAGA,MAAMC,KAAK,GAAG,CAAC;AAAEC,EAAAA;AAAF,CAAD,KAAqB;AAAA;;AAEjC,QAAMC,QAAQ,GAAGT,WAAW,EAA5B;AAEA,QAAMU,YAAY,GAAGX,WAAW,CAAEY,KAAD,IAAWA,KAAZ,CAAhC;AACAC,EAAAA,OAAO,CAACC,GAAR,CAAYL,WAAZ;AACA,QAAMM,cAAc,GAAKJ,YAAY,CAACK,UAAtC;AACA,QAAMC,gBAAgB,GAAGjB,WAAW,CAAEY,KAAD,IAAWA,KAAK,CAACM,IAAlB,CAApC;AAEA,QAAMC,MAAM,GAAGF,gBAAgB,GAAGA,gBAAgB,CAACG,MAApB,GAA6B,EAA5D;AAEA,MAAIC,aAAa,GAAG,CAApB;AACA,MAAIC,MAAM,GAAG,IAAb;AACA,MAAIC,SAAS,GAAI,KAAjB;;AAEA,MAAGR,cAAH,EAAkB;AAChB;AACAA,IAAAA,cAAc,CAACS,SAAf,CAAyBC,GAAzB,CAA6BC,QAAQ,IAAI;AACvC,UAAGA,QAAQ,CAACjB,WAAT,KAAyBA,WAA5B,EAAwC;AACtCY,QAAAA,aAAa,GAAGK,QAAQ,CAACC,KAAT,CAAeC,MAA/B,CADsC,CAGtC;;AACAF,QAAAA,QAAQ,CAACC,KAAT,CAAeF,GAAf,CAAmBI,QAAQ,IAAI;AAC7B,cAAGA,QAAQ,CAACC,OAAT,KAAqBX,MAAxB,EAA+B;AAC7BI,YAAAA,SAAS,GAAG,IAAZ;AACAD,YAAAA,MAAM,GAAGO,QAAQ,CAACE,EAAlB;AACD;AACF,SALD;AAMD;AACF,KAZD;AAaD;;AAED,QAAMC,iBAAiB,GAAGD,EAAE,IAAIrB,QAAQ,CAACJ,UAAU,CAACyB,EAAD,CAAX,CAAxC;;AACA,QAAME,OAAO,GAAGF,EAAE,IAAIrB,QAAQ,CAACN,UAAU,CAAC2B,EAAD,CAAX,CAA9B;;AACA,QAAMG,UAAU,GAAGC,OAAO,IAAIzB,QAAQ,CAACL,UAAU,CAAC8B,OAAD,CAAX,CAAtC;;AAEApC,EAAAA,SAAS,CAAC,MAAM;AACdiC,IAAAA,iBAAiB,CAACvB,WAAD,CAAjB,CADc,CAEhB;AACC,GAHQ,EAGN,EAHM,CAAT;;AAMA,QAAM2B,MAAM,GAAIC,CAAD,IAAO;AACpBA,IAAAA,CAAC,CAACC,cAAF;AACA,QAAIP,EAAE,GAAGT,MAAT;AACAY,IAAAA,UAAU,CAAC;AAACH,MAAAA,EAAD;AAAKtB,MAAAA;AAAL,KAAD,CAAV;AACD,GAJD;;AAMA,QAAM8B,QAAQ,GAAIF,CAAD,IAAO;AACtBA,IAAAA,CAAC,CAACC,cAAF;AACAL,IAAAA,OAAO,CAACxB,WAAD,CAAP;AACD,GAHD;;AAKA,QAAM+B,UAAU,GAAIH,CAAD,IAAO;AACxBA,IAAAA,CAAC,CAACC,cAAF;AACAf,IAAAA,SAAS,GAAGa,MAAM,CAACC,CAAD,CAAT,GAAeE,QAAQ,CAACF,CAAD,CAAhC;AACD,GAHD;;AAIA,QAAMI,MAAM,GAAIJ,CAAD,IAAO;AACpBA,IAAAA,CAAC,CAACC,cAAF;AACA/B,IAAAA,OAAO,CAACmC,IAAR,CAAa,QAAb;AACD,GAHD;;AAKA,sBACE;AAAK,IAAA,SAAS,EAAC,WAAf;AAAA,2BACE;AAAK,MAAA,SAAS,EAAC,mBAAf;AAAA,6BACE;AAAM,QAAA,SAAS,EAAC,MAAhB;AAAA,kBACIvB,MAAM,gBACN;AAAM,UAAA,OAAO,EAAEqB,UAAf;AAAA,qBACEjB,SAAS,gBACT,QAAC,OAAD;AAAS,YAAA,SAAS,EAAC;AAAnB;AAAA;AAAA;AAAA;AAAA,kBADS,gBAGT,QAAC,UAAD;AAAY,YAAA,SAAS,EAAC;AAAtB;AAAA;AAAA;AAAA;AAAA,kBAJF,eAMA;AAAM,YAAA,SAAS,EAAC,MAAhB;AAAA,sBACGF;AADH;AAAA;AAAA;AAAA;AAAA,kBANA;AAAA;AAAA;AAAA;AAAA;AAAA,gBADM,gBAYN;AAAM,UAAA,OAAO,EAAEoB,MAAf;AAAA,kCACE,QAAC,UAAD;AAAY,YAAA,SAAS,EAAC;AAAtB;AAAA;AAAA;AAAA;AAAA,kBADF,eAEA;AAAM,YAAA,SAAS,EAAC,MAAhB;AAAA,sBACGpB;AADH;AAAA;AAAA;AAAA;AAAA,kBAFA;AAAA;AAAA;AAAA;AAAA;AAAA;AAbJ;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,UADF;AA2BD,CAzFD;;GAAMb,K;UAEaP,W,EAEID,W,EAGIA,W;;;KAPrBQ,K;AA2FN,eAAeA,KAAf","sourcesContent":["import React, { useEffect } from 'react'\r\nimport { useSelector, useDispatch } from 'react-redux'\r\nimport { FaRegHeart, FaHeart } from 'react-icons/fa'\r\n\r\n//import \"../questions/Question.css\";\r\nimport { createLike, deleteLike, fetchLikes } from '../../store/modules/likes/actions/likesaction';\r\nimport { history } from '../../history'\r\n\r\n\r\nconst Likes = ({ questionsID }) => {\r\n\r\n  const dispatch = useDispatch()\r\n\r\n  const currentState = useSelector((state) => state);\r\n  console.log(questionsID)\r\n  const questionsLikes  =  currentState.LikesState\r\n  const currentUserState = useSelector((state) => state.Auth);\r\n\r\n  const authID = currentUserState ? currentUserState.userId : \"\"\r\n  \r\n  let questionsLike = 0\r\n  let likeID = null\r\n  let authLiked  = false\r\n\r\n  if(questionsLikes){\r\n    // eslint-disable-next-line array-callback-return\r\n    questionsLikes.likeItems.map(eachItem => {\r\n      if(eachItem.questionsID === questionsID){\r\n        questionsLike = eachItem.likes.length  \r\n\r\n        // eslint-disable-next-line array-callback-return\r\n        eachItem.likes.map(eachLike => {\r\n          if(eachLike.user_id === authID){\r\n            authLiked = true\r\n            likeID = eachLike.id\r\n          } \r\n        })  \r\n      }\r\n    }) \r\n  }\r\n\r\n  const getQuestionsLikes = id => dispatch(fetchLikes(id));\r\n  const addLike = id => dispatch(createLike(id))\r\n  const removeLike = details => dispatch(deleteLike(details))\r\n\r\n  useEffect(() => {\r\n    getQuestionsLikes(questionsID);\r\n  // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [])\r\n\r\n\r\n  const unLike = (e) => {\r\n    e.preventDefault()\r\n    let id = likeID\r\n    removeLike({id, questionsID})\r\n  }\r\n\r\n  const saveLike = (e) => {\r\n    e.preventDefault()\r\n    addLike(questionsID)\r\n  }\r\n\r\n  const likeToggle = (e) => {\r\n    e.preventDefault()\r\n    authLiked ? unLike(e) : saveLike(e)\r\n  }\r\n  const noAuth = (e) => {\r\n    e.preventDefault()\r\n    history.push('/login');\r\n  }\r\n\r\n  return (\r\n    <div className=\"style-fav\">\r\n      <div className=\"style-heart-outer\">\r\n        <span className=\"mr-4\">\r\n          { authID ? (\r\n            <span onClick={likeToggle}>\r\n            { authLiked ? \r\n              <FaHeart className=\"style-auth\"/>\r\n              :\r\n              <FaRegHeart className=\"style-heart\"/>\r\n            }\r\n            <span className=\"ml-2\">\r\n              {questionsLike}\r\n            </span>\r\n          </span>\r\n          ) : (\r\n            <span onClick={noAuth}>\r\n              <FaRegHeart className=\"style-heart\"/>\r\n            <span className=\"ml-2\">\r\n              {questionsLike}\r\n            </span>\r\n          </span>\r\n          )}\r\n        </span>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Likes"]},"metadata":{},"sourceType":"module"}