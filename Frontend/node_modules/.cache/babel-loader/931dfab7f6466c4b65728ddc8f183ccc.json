{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\admin\\\\Desktop\\\\Ministry of Programming\\\\askit\\\\src\\\\components\\\\likes\\\\Likes.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { FaRegHeart, FaHeart } from 'react-icons/fa'; //import \"../questions/Question.css\";\n\nimport { createLike, deleteLike, fetchLikes } from '../../store/modules/likes/actions/likesaction';\nimport { history } from '../../history';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Likes = ({\n  questionsID\n}) => {\n  _s();\n\n  const dispatch = useDispatch();\n  const currentState = useSelector(state => state);\n  const questionsLikes = currentState.LikesState;\n  const currentUserState = useSelector(state => state.Auth);\n  const authID = currentUserState ? currentUserState.userId : \"\";\n  let questionsLike = [];\n  let likeID = null;\n  let authLiked = false;\n\n  if (questionsLikes) {\n    // eslint-disable-next-line array-callback-return\n    questionsLikes.likeItems.map(eachItem => {\n      if (eachItem.questionID === questionsID) {\n        questionsLike = eachItem.likes; // eslint-disable-next-line array-callback-return\n\n        eachItem.likes.map(eachLike => {\n          if (eachLike.user_id === authID) {\n            authLiked = true;\n            likeID = eachLike.id;\n          }\n        });\n      }\n    });\n  }\n\n  const getQuestionsLikes = id => dispatch(fetchLikes(id));\n\n  const addLike = details => dispatch(createLike(details));\n\n  const removeLike = details => dispatch(deleteLike(details));\n\n  useEffect(() => {\n    getQuestionsLikes(questionsID); // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  const unLike = e => {\n    e.preventDefault();\n    console.log(likeID);\n    let id = likeID;\n    removeLike({\n      id,\n      questionsID\n    });\n  };\n\n  const saveLike = e => {\n    e.preventDefault();\n    addLike({\n      question_id: questionsID,\n      user_id: authID\n    });\n  };\n\n  const likeToggle = e => {\n    e.preventDefault();\n    authLiked ? unLike(e) : saveLike(e);\n  };\n\n  const noAuth = e => {\n    e.preventDefault();\n    history.push('/login');\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"style-fav\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"style-heart-outer\",\n      children: /*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"mr-4\",\n        children: authID ? /*#__PURE__*/_jsxDEV(\"span\", {\n          onClick: likeToggle,\n          children: [authLiked ? /*#__PURE__*/_jsxDEV(FaHeart, {\n            className: \"style-auth\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 80,\n            columnNumber: 15\n          }, this) : /*#__PURE__*/_jsxDEV(FaRegHeart, {\n            className: \"style-heart\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 82,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"ml-2\",\n            children: questionsLike.length\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 85,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 78,\n          columnNumber: 13\n        }, this) : /*#__PURE__*/_jsxDEV(\"span\", {\n          onClick: noAuth,\n          children: [/*#__PURE__*/_jsxDEV(FaRegHeart, {\n            className: \"style-heart\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 91,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"ml-2\",\n            children: questionsLike.length\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 92,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 90,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 74,\n    columnNumber: 5\n  }, this);\n};\n\n_s(Likes, \"vqxln2hP6mIa5mX887T77ciQufk=\", false, function () {\n  return [useDispatch, useSelector, useSelector];\n});\n\n_c = Likes;\nexport default Likes;\n\nvar _c;\n\n$RefreshReg$(_c, \"Likes\");","map":{"version":3,"sources":["C:/Users/admin/Desktop/Ministry of Programming/askit/src/components/likes/Likes.js"],"names":["React","useEffect","useSelector","useDispatch","FaRegHeart","FaHeart","createLike","deleteLike","fetchLikes","history","Likes","questionsID","dispatch","currentState","state","questionsLikes","LikesState","currentUserState","Auth","authID","userId","questionsLike","likeID","authLiked","likeItems","map","eachItem","questionID","likes","eachLike","user_id","id","getQuestionsLikes","addLike","details","removeLike","unLike","e","preventDefault","console","log","saveLike","question_id","likeToggle","noAuth","push","length"],"mappings":"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","sourcesContent":["import React, { useEffect } from 'react'\r\nimport { useSelector, useDispatch } from 'react-redux'\r\nimport { FaRegHeart, FaHeart } from 'react-icons/fa'\r\n\r\n//import \"../questions/Question.css\";\r\nimport { createLike, deleteLike, fetchLikes } from '../../store/modules/likes/actions/likesaction';\r\nimport { history } from '../../history'\r\n\r\n\r\nconst Likes = ({ questionsID }) => {\r\n\r\n  const dispatch = useDispatch()\r\n\r\n  const currentState = useSelector((state) => state);\r\n  const questionsLikes  =  currentState.LikesState\r\n  const currentUserState = useSelector((state) => state.Auth);\r\n\r\n  const authID = currentUserState ? currentUserState.userId : \"\"\r\n\r\n  let questionsLike = []\r\n  let likeID = null\r\n  let authLiked  = false\r\n\r\n  if(questionsLikes){\r\n    // eslint-disable-next-line array-callback-return\r\n    questionsLikes.likeItems.map(eachItem => {\r\n      if(eachItem.questionID === questionsID){\r\n        questionsLike = eachItem.likes\r\n        // eslint-disable-next-line array-callback-return\r\n        eachItem.likes.map(eachLike => {\r\n          if(eachLike.user_id === authID){\r\n            authLiked = true\r\n            likeID = eachLike.id\r\n          } \r\n        })  \r\n      }\r\n    }) \r\n  }\r\n\r\n  const getQuestionsLikes = id => dispatch(fetchLikes(id));\r\n  const addLike = details => dispatch(createLike(details))\r\n  const removeLike = details => dispatch(deleteLike(details))\r\n\r\n  useEffect(() => {\r\n    getQuestionsLikes(questionsID);\r\n  // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [])\r\n\r\n  const unLike = (e) => {\r\n    e.preventDefault()\r\n    console.log(likeID)\r\n    let id = likeID\r\n    removeLike({id, questionsID})\r\n  }\r\n\r\n  const saveLike = (e) => {\r\n    e.preventDefault()\r\n    addLike({\r\n      question_id: questionsID,\r\n      user_id: authID\r\n    })\r\n  }\r\n\r\n  const likeToggle = (e) => {\r\n    e.preventDefault()\r\n    authLiked ? unLike(e) : saveLike(e)\r\n  }\r\n  const noAuth = (e) => {\r\n    e.preventDefault()\r\n    history.push('/login');\r\n  }\r\n\r\n  return (\r\n    <div className=\"style-fav\">\r\n      <div className=\"style-heart-outer\">\r\n        <span className=\"mr-4\">\r\n          { authID ? (\r\n            <span onClick={likeToggle}>\r\n            { authLiked ? \r\n              <FaHeart className=\"style-auth\"/>\r\n              :\r\n              <FaRegHeart className=\"style-heart\"/>\r\n              \r\n            }\r\n            <span className=\"ml-2\">\r\n              {questionsLike.length}\r\n            </span>\r\n          </span>\r\n          ) : (\r\n            <span onClick={noAuth}>\r\n              <FaRegHeart className=\"style-heart\"/>\r\n            <span className=\"ml-2\">\r\n              {questionsLike.length}\r\n            </span>\r\n          </span>\r\n          )}\r\n        </span>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Likes"]},"metadata":{},"sourceType":"module"}