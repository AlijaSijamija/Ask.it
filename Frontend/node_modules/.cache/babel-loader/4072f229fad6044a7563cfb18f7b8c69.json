{"ast":null,"code":"import API_ROUTE from \"../../../../apiRoute\";\nimport axios from 'axios';\nimport setAuthorizationToken from \"../../../../authorization/authorization\";\nimport { BEFORE_STATE, SIGNUP_SUCCESS, SIGNUP_ERROR, LOGIN_SUCCESS, LOGIN_ERROR, LOGOUT_SUCCESS, UPDATE_USER_SUCCESS, UPDATE_USER_ERROR, BEFORE_USER_STATE, DELETE_USER_SUCCESS, DELETE_USER_ERROR, FETCH_USERS, FETCH_USERS_ERROR } from '../authTypes';\nimport { history } from '../../../../history';\nexport const SignIn = credentials => {\n  return async dispatch => {\n    dispatch({\n      type: BEFORE_STATE\n    });\n\n    try {\n      const res = await axios.post(`${API_ROUTE}/login`, credentials);\n      let userData = res.data;\n      sessionStorage.setItem(\"token\", userData.token);\n      sessionStorage.setItem('user_data', JSON.stringify(userData));\n      var falseToken = localStorage.getItem('user_data');\n      var trueToken = falseToken.replace(/\"/g, '');\n      sessionStorage.setItem('user_token', trueToken);\n      setAuthorizationToken(userData.token);\n      dispatch({\n        type: LOGIN_SUCCESS,\n        payload: userData\n      });\n    } catch (err) {\n      dispatch({\n        type: LOGIN_ERROR,\n        payload: err.response.data.error\n      });\n    }\n  };\n};\n_c = SignIn;\nexport const SignOut = () => {\n  return dispatch => {\n    localStorage.removeItem(\"token\");\n    setAuthorizationToken(false);\n    dispatch({\n      type: LOGOUT_SUCCESS\n    });\n    window.localStorage.clear(); //update the localstorage\n\n    history.push('/login');\n  };\n};\n_c2 = SignOut;\nexport const SignUp = newUser => {\n  return async dispatch => {\n    dispatch({\n      type: BEFORE_STATE\n    });\n\n    try {\n      await axios.post(`${API_ROUTE}/users`, newUser);\n      dispatch({\n        type: SIGNUP_SUCCESS\n      });\n      history.push('/login');\n    } catch (err) {\n      dispatch({\n        type: SIGNUP_ERROR,\n        payload: err.response.data.error\n      });\n    }\n  };\n};\n_c3 = SignUp;\nexport const updateUser = updateUser => {\n  return async (dispatch, getState) => {\n    dispatch({\n      type: BEFORE_USER_STATE\n    });\n    const {\n      currentUser\n    } = getState().Auth;\n\n    try {\n      const res = await axios.put(`${API_ROUTE}/users/${updateUser.id}`, updateUser);\n      let updatedUser = res.data.response;\n      dispatch({\n        type: UPDATE_USER_SUCCESS,\n        payload: updatedUser\n      });\n      window.localStorage.setItem('user_data', JSON.stringify(updatedUser)); //update the localstorages\n    } catch (err) {\n      dispatch({\n        type: UPDATE_USER_ERROR,\n        payload: err.response.data.error\n      });\n    }\n  };\n};\nexport const deleteUser = id => {\n  return async dispatch => {\n    dispatch({\n      type: BEFORE_STATE\n    });\n\n    try {\n      const res = await axios.delete(`${API_ROUTE}/users/${id}`);\n      let deleteMessage = res.data.response;\n      dispatch({\n        type: DELETE_USER_SUCCESS,\n        payload: deleteMessage\n      });\n      window.localStorage.clear(); //update the localstorage\n\n      window.location.href = \"/\";\n    } catch (err) {\n      dispatch({\n        type: DELETE_USER_ERROR,\n        payload: err.response.data.error\n      });\n    }\n  };\n};\nexport const getUser = id => {\n  return async dispatch => {\n    axios.get(`${API_ROUTE}/users/${id}`).then(res => {\n      dispatch({\n        type: FETCH_USERS,\n        payload: res.data\n      });\n      localStorage.setItem(\"user_info\", JSON.stringify(res.data));\n    }).catch(err => {\n      dispatch({\n        type: FETCH_USERS_ERROR,\n        payload: err ? err.data.error : \"\"\n      });\n    });\n  };\n};\n\nvar _c, _c2, _c3;\n\n$RefreshReg$(_c, \"SignIn\");\n$RefreshReg$(_c2, \"SignOut\");\n$RefreshReg$(_c3, \"SignUp\");","map":{"version":3,"sources":["C:/Users/admin/Desktop/Ministry of Programming/askit/src/store/modules/auth/actions/authAction.js"],"names":["API_ROUTE","axios","setAuthorizationToken","BEFORE_STATE","SIGNUP_SUCCESS","SIGNUP_ERROR","LOGIN_SUCCESS","LOGIN_ERROR","LOGOUT_SUCCESS","UPDATE_USER_SUCCESS","UPDATE_USER_ERROR","BEFORE_USER_STATE","DELETE_USER_SUCCESS","DELETE_USER_ERROR","FETCH_USERS","FETCH_USERS_ERROR","history","SignIn","credentials","dispatch","type","res","post","userData","data","sessionStorage","setItem","token","JSON","stringify","falseToken","localStorage","getItem","trueToken","replace","payload","err","response","error","SignOut","removeItem","window","clear","push","SignUp","newUser","updateUser","getState","currentUser","Auth","put","id","updatedUser","deleteUser","delete","deleteMessage","location","href","getUser","get","then","catch"],"mappings":"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","sourcesContent":["import API_ROUTE from \"../../../../apiRoute\";\r\nimport axios from 'axios'\r\nimport setAuthorizationToken  from \"../../../../authorization/authorization\";\r\nimport { BEFORE_STATE, SIGNUP_SUCCESS, SIGNUP_ERROR, LOGIN_SUCCESS, LOGIN_ERROR, \r\n  LOGOUT_SUCCESS, UPDATE_USER_SUCCESS, UPDATE_USER_ERROR, BEFORE_USER_STATE, \r\n  DELETE_USER_SUCCESS, DELETE_USER_ERROR, FETCH_USERS, FETCH_USERS_ERROR } from '../authTypes'\r\nimport  {history} from '../../../../history'\r\n\r\n\r\nexport const SignIn = (credentials) => {\r\n  return async (dispatch) => {\r\n      dispatch({ type: BEFORE_STATE }) \r\n    try {\r\n      const res = await axios.post(`${API_ROUTE}/login`, credentials)\r\n      let userData = res.data\r\n      sessionStorage.setItem(\"token\", userData.token)\r\n      sessionStorage.setItem('user_data', JSON.stringify(userData));\r\n      var falseToken = localStorage.getItem('user_data')\r\n      var trueToken = falseToken.replace(/\"/g,'')\r\n      sessionStorage.setItem('user_token',trueToken)\r\n      setAuthorizationToken(userData.token)\r\n      dispatch({ type: LOGIN_SUCCESS, payload: userData })\r\n    } catch(err) {\r\n      dispatch({ type: LOGIN_ERROR, payload: err.response.data.error })\r\n    }\r\n  }\r\n}\r\n\r\nexport const SignOut = () => {\r\n  return (dispatch) => {\r\n    localStorage.removeItem(\"token\")\r\n    setAuthorizationToken(false)\r\n    dispatch({ type: LOGOUT_SUCCESS })\r\n    window.localStorage.clear(); //update the localstorage\r\n    history.push('/login');\r\n  }\r\n}\r\n\r\nexport const SignUp = (newUser) => {\r\n    return async (dispatch) => {\r\n        dispatch({ type: BEFORE_STATE }) \r\n      try {\r\n        await axios.post(`${API_ROUTE}/users`, newUser);\r\n        dispatch({ type: SIGNUP_SUCCESS })\r\n        history.push('/login');\r\n      } catch(err) {\r\n        dispatch({ type: SIGNUP_ERROR, payload: err.response.data.error })\r\n    }\r\n  }\r\n}\r\n\r\nexport const updateUser = (updateUser) => {\r\n\r\n  return async (dispatch, getState) => {\r\n    dispatch({ type: BEFORE_USER_STATE })\r\n    const { currentUser } = getState().Auth\r\n    try {\r\n      const res = await axios.put(`${API_ROUTE}/users/${updateUser.id}`, updateUser);\r\n      let updatedUser = res.data.response\r\n\r\n      dispatch({ type: UPDATE_USER_SUCCESS, payload: updatedUser })\r\n      window.localStorage.setItem('user_data', JSON.stringify(updatedUser)); //update the localstorages\r\n    } catch (err) {\r\n      dispatch({ type: UPDATE_USER_ERROR, payload: err.response.data.error })\r\n    }\r\n  }\r\n}\r\n\r\nexport const deleteUser = (id)  => {\r\n\r\n  return async dispatch => {\r\n    dispatch({ type: BEFORE_STATE })\r\n    try {\r\n      const res = await axios.delete(`${API_ROUTE}/users/${id}`);\r\n      let deleteMessage = res.data.response\r\n      dispatch({ type: DELETE_USER_SUCCESS, payload: deleteMessage })\r\n      window.localStorage.clear(); //update the localstorage\r\n      window.location.href = \"/\"\r\n    } catch (err) {\r\n      dispatch({ type: DELETE_USER_ERROR, payload: err.response.data.error })\r\n    }\r\n  }\r\n}\r\n\r\nexport const getUser = (id) => {\r\n\r\n  return async (dispatch) => {\r\n    axios.get(`${API_ROUTE}/users/${id}`).then(res => {\r\n      dispatch({ type: FETCH_USERS, payload: res.data })\r\n      localStorage.setItem(\"user_info\", JSON.stringify(res.data))\r\n    }).catch(err => {\r\n      dispatch({ type: FETCH_USERS_ERROR, payload: err ? err.data.error : \"\" })\r\n    })\r\n  }\r\n}"]},"metadata":{},"sourceType":"module"}