{"ast":null,"code":"import API_ROUTE from \"../../../../apiRoute\";\nimport axios from \"axios\";\nimport { SIGNUP_SUCCESS, SIGNUP_ERROR, LOGIN_SUCCESS, LOGIN_ERROR, LOGOUT_SUCCESS, UPDATE_USER_SUCCESS, UPDATE_USER_ERROR, FETCH_USERS_ERROR, DELETE_USER_SUCCESS, DELETE_USER_ERROR, FETCH_USERS } from \"../authTypes\";\nimport { history } from \"../../../../history\";\nexport const SignIn = credentials => {\n  return async dispatch => {\n    axios.post(`${API_ROUTE}/login`, credentials).then(res => {\n      const authToken = res.data;\n      const base64Url = authToken.split(\".\")[1];\n      const base64 = base64Url.replace(\"-\", \"+\").replace(\"_\", \"/\");\n      const userId = JSON.parse(window.atob(base64));\n      let user_id = userId.user_id;\n      dispatch({\n        type: LOGIN_SUCCESS,\n        payload: {\n          user_id,\n          authToken\n        }\n      });\n      axios.defaults.headers.common[\"Authorization\"] = `Bearer ${authToken}`;\n    }).catch(ex => {\n      dispatch({\n        type: LOGIN_ERROR,\n        payload: ex.message\n      });\n    });\n  };\n};\n_c = SignIn;\nexport const SignOut = () => {\n  return dispatch => {\n    dispatch({\n      type: LOGOUT_SUCCESS\n    });\n    delete axios.defaults.headers.common[\"Authorization\"];\n    history.replace(\"/login\");\n  };\n};\n_c2 = SignOut;\nexport const SignUp = newUser => {\n  return async dispatch => {\n    await axios.post(`${API_ROUTE}/users`, newUser).then(() => {\n      dispatch({\n        type: SIGNUP_SUCCESS\n      });\n      history.push(\"/login\");\n    }).catch(ex => {\n      dispatch({\n        type: SIGNUP_ERROR,\n        payload: ex.message\n      });\n    });\n  };\n};\n_c3 = SignUp;\nexport const updateUser = (userId, updateUser) => {\n  return async dispatch => {\n    axios.put(`${API_ROUTE}/users/${userId}`, updateUser).then(res => {\n      dispatch({\n        type: UPDATE_USER_SUCCESS,\n        payload: res.data\n      });\n    }).catch(ex => {\n      dispatch({\n        type: UPDATE_USER_ERROR,\n        payload: ex.message\n      });\n    });\n  };\n};\nexport const deleteUser = id => {\n  return async dispatch => {\n    axios.delete(`${API_ROUTE}/users/${id}`).then(res => {\n      dispatch({\n        type: DELETE_USER_SUCCESS,\n        payload: res.data.response\n      });\n      window.location.href = \"/\";\n    }).catch(ex => {\n      dispatch({\n        type: DELETE_USER_ERROR,\n        payload: ex.message\n      });\n    });\n  };\n};\nexport const getUser = userId => {\n  return async dispatch => {\n    axios.get(`${API_ROUTE}/users/${userId}`).then(res => {\n      dispatch({\n        type: FETCH_USERS,\n        payload: res.data\n      });\n    }).catch(e => {\n      dispatch({\n        type: FETCH_USERS_ERROR,\n        error: e.message\n      });\n    });\n  };\n};\n\nvar _c, _c2, _c3;\n\n$RefreshReg$(_c, \"SignIn\");\n$RefreshReg$(_c2, \"SignOut\");\n$RefreshReg$(_c3, \"SignUp\");","map":{"version":3,"sources":["C:/Users/admin/Desktop/Ministry of Programming/askit/src/store/modules/auth/actions/authAction.js"],"names":["API_ROUTE","axios","SIGNUP_SUCCESS","SIGNUP_ERROR","LOGIN_SUCCESS","LOGIN_ERROR","LOGOUT_SUCCESS","UPDATE_USER_SUCCESS","UPDATE_USER_ERROR","FETCH_USERS_ERROR","DELETE_USER_SUCCESS","DELETE_USER_ERROR","FETCH_USERS","history","SignIn","credentials","dispatch","post","then","res","authToken","data","base64Url","split","base64","replace","userId","JSON","parse","window","atob","user_id","type","payload","defaults","headers","common","catch","ex","message","SignOut","SignUp","newUser","push","updateUser","put","deleteUser","id","delete","response","location","href","getUser","get","e","error"],"mappings":"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","sourcesContent":["import API_ROUTE from \"../../../../apiRoute\";\r\nimport axios from \"axios\";\r\nimport {\r\n  SIGNUP_SUCCESS,\r\n  SIGNUP_ERROR,\r\n  LOGIN_SUCCESS,\r\n  LOGIN_ERROR,\r\n  LOGOUT_SUCCESS,\r\n  UPDATE_USER_SUCCESS,\r\n  UPDATE_USER_ERROR,\r\n  FETCH_USERS_ERROR,\r\n  DELETE_USER_SUCCESS,\r\n  DELETE_USER_ERROR,\r\n  FETCH_USERS,\r\n} from \"../authTypes\";\r\nimport { history } from \"../../../../history\";\r\n\r\nexport const SignIn = (credentials) => {\r\n  return async (dispatch) => {\r\n    axios\r\n      .post(`${API_ROUTE}/login`, credentials)\r\n      .then((res) => {\r\n        const authToken = res.data;\r\n        const base64Url = authToken.split(\".\")[1];\r\n        const base64 = base64Url.replace(\"-\", \"+\").replace(\"_\", \"/\");\r\n        const userId = JSON.parse(window.atob(base64));\r\n        let user_id = userId.user_id;\r\n\r\n        dispatch({ type: LOGIN_SUCCESS, payload: { user_id, authToken } });\r\n        axios.defaults.headers.common[\"Authorization\"] = `Bearer ${authToken}`;\r\n      })\r\n      .catch((ex) => {\r\n        dispatch({ type: LOGIN_ERROR, payload: ex.message });\r\n      });\r\n  };\r\n};\r\n\r\nexport const SignOut = () => {\r\n  return (dispatch) => {\r\n    dispatch({ type: LOGOUT_SUCCESS });\r\n    delete axios.defaults.headers.common[\"Authorization\"];\r\n    history.replace(\"/login\");\r\n  };\r\n};\r\n\r\nexport const SignUp = (newUser) => {\r\n  return async (dispatch) => {\r\n    await axios\r\n      .post(`${API_ROUTE}/users`, newUser)\r\n      .then(() => {\r\n        dispatch({ type: SIGNUP_SUCCESS });\r\n        history.push(\"/login\");\r\n      })\r\n      .catch((ex) => {\r\n        dispatch({ type: SIGNUP_ERROR, payload: ex.message });\r\n      });\r\n  };\r\n};\r\n\r\nexport const updateUser = (userId, updateUser) => {\r\n  return async (dispatch) => {\r\n    axios\r\n      .put(`${API_ROUTE}/users/${userId}`, updateUser)\r\n      .then((res) => {\r\n        dispatch({ type: UPDATE_USER_SUCCESS, payload: res.data });\r\n      })\r\n      .catch((ex) => {\r\n        dispatch({ type: UPDATE_USER_ERROR, payload: ex.message });\r\n      });\r\n  };\r\n};\r\n\r\nexport const deleteUser = (id) => {\r\n  return async (dispatch) => {\r\n    axios\r\n      .delete(`${API_ROUTE}/users/${id}`)\r\n      .then((res) => {\r\n        dispatch({ type: DELETE_USER_SUCCESS, payload: res.data.response });\r\n        window.location.href = \"/\";\r\n      })\r\n      .catch((ex) => {\r\n        dispatch({ type: DELETE_USER_ERROR, payload: ex.message });\r\n      });\r\n  };\r\n};\r\n\r\nexport const getUser = (userId) => {\r\n  return async (dispatch) => {\r\n    axios\r\n      .get(`${API_ROUTE}/users/${userId}`)\r\n      .then((res) => {\r\n        dispatch({ type: FETCH_USERS, payload: res.data });\r\n      })\r\n      .catch((e) => {\r\n        dispatch({ type: FETCH_USERS_ERROR, error: e.message });\r\n      });\r\n  };\r\n};\r\n"]},"metadata":{},"sourceType":"module"}